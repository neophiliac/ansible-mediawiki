# =============================================================================
#
# - Copyright (C) 2016     George Li <yongxinl@outlook.com>
#
# - This is part of HomeVault imagebuilder project.
# - This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
# =============================================================================

---
- name: check if {{ install_role_name }} has installed and configured
  find:
    paths: "{{ mediawiki_root }}"
    pattern: 'LocalSettings.php'
    file_type: file
  register: wiki_status

- name: debug
  debug:
    msg: "wiki_status: {{ wiki_status.matched }}"

- include: install-debian.yml

- include: setup.yml
  when: wiki_status.matched|int == 0