# =============================================================================
#
# - Copyright (C) 2017     George Li <yongxinl@outlook.com>
#
# - This is part of HomeVault imagebuilder project.
# - This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
# =============================================================================
#
# todo: verify VisualEditor / parsoid configuration

# Default variables
# =================

# .. contents:: Sections
#    :local:
#
# ------------------------------------
#   Packages and installation
# ------------------------------------
install_role_name: 'mediawiki'

# .. envvar:: mediawiki_version
#
# specify the MediaWiki version clone from repository
mediawiki_version: 'REL1_27'

# .. envvar:: target_host_domain
#
# Specify hostname and domain that should be set in the target image.
target_host_domain: 'lifamilyclub.com'

# .. envvar:: mediawiki_uniqueid
#
# Specify mediaiwki uniqueid
mediawiki_uniqueid: 'sandbox'

# .. envvar:: mediawiki_server
#
# Specify server name to use for MediaWiki
mediawiki_server: '{{ mediawiki_uniqueid }}.{{ target_host_domain }}'

# .. envvar:: mediawiki_server
#
# Specify server name to use for MediaWiki
mediawiki_sitename: 'Family Library'

# .. envvar:: mediawiki_db_name
#
# specify the MediaWiki databaes user
mediawiki_db_name: 'yongxin_webdb'

# .. envvar:: mediawiki_db_user
#
# specify the MediaWiki databaes user
mediawiki_db_user: 'webconn'

# .. envvar:: target_root_password
#
# Specify root password for both of os and database
target_root_password: 'secret'

# .. envvar:: mediawiki_admin_user
#
# Specify admin user for mediaWiki site
mediawiki_admin_user: 'wikiadmin'

# .. envvar:: mediawiki_admin_password
#
# Specify admin password for mediaWiki site
mediawiki_admin_password: '{{ target_root_password }}'

# .. envvar:: mediawiki_admin_email
#
# Specify admin email for mediaWiki site
mediawiki_admin_email: 'postmaster@{{ target_host_domain }}'

# .. envvar:: mediawiki_logo
#
# Specify log file for mediaWiki site, add $wgResourceBasePath in the front
mediawiki_logo: '$wgResourceBasePath/images/logo.png'

# .. envvar:: target_appdata_root
#
# Specify folder that will be use as new location of application data files
# in case if you want to collect all appdata files in one
target_appdata_root: '/var/lib'

# .. envvar:: target_appdata_root
#
# Specify folder that will be use as new location of application data files
# in case if you want to collect all appdata files in one
mediawiki_root: '{{ target_appdata_root }}/wiki'

# .. envvar:: mediawiki_remove_git
#
# Specify this if you want to remove .git folder to save space
mediawiki_remove_git: True

# .. envvar:: docker_search
#
# Disable / enable Elastic Search in Docker
docker_search: False

# .. envvar:: mediawiki_editor
#
# Specify which Editor will be install
# Editor to choose:  CKeditor or VisualEditor
mediawiki_editor: 'CKeditor'

# .. envvar:: mediawiki_base_packages
#
# List of required Linux packages for Mediawiki
mediawiki_base_packages:
  - 'git'
  - 'openssl'

# .. envvar:: mediawiki_core_skins
#
# List of skins will be download from MediaWiki repository
mediawiki_core_skins:
  - { name: 'Vector' }

# .. envvar:: mediawiki_3rdparty_skins
#
# List of skins will be download from 3rd-party repository
mediawiki_3rdparty_skins: []
#   - { name: 'Foreground', repo: 'https://github.com/thingles/foreground.git', version: '44667e9' }

# .. envvar:: mediawiki_core_extensions
#
# List of skins will be download from MediaWiki repository, load with $wfLoadExtension
mediawiki_core_extensions:
  - { name: 'Cite' }                       # allows footnotes for citing sources and helps for correctly citing content in offline media
  - { name: 'CiteThisPage' }               # adds a special page that provides different citation format
  - { name: 'CodeEditor' }                 # provides a syntax-highlighting code editor for site
  - { name: 'Elastica' }                   # provides base ElasticSearch functionality
  - { name: 'ImageMap' }                   # allows clickable image maps
  - { name: 'InputBox' }                   # allows users to add predefined HTML forms
  - { name: 'Interwiki' }                  # adds the "Special:Interwiki" page to MediaWiki, to view and edit the interwiki table
  - { name: 'LocalisationUpdate' }         # allows to update the locations for MediaWiki message without upgrade the MediaWiki
  - { name: 'MobileFrontend' }             # provides a mobile-friendly view  
  - { name: 'MultimediaViewer' }           # provides a better experience to users when they click on thumbnails in a page  
  - { name: 'ParserFunctions' }            # enhances parser with logical and string functions
  - { name: 'PdfHandler' }                 # allows to handle PDF files
  - { name: 'SyntaxHighlight_GeSHi' }      # provides rich formating of source code using the <syntaxhighlight> tag
  - { name: 'WikiEditor' }                 # provides an improved interface for editing wikitext
  - { name: 'PageImages' }                 # collect information about images used on a page. required by PopUp extension
  - { name: 'TextExtracts' }               # provides an API with allows to retrieve plain-text. required by PopUp extension
  - { name: 'Popups' }                     # (20170201, only work on Rel 1.28) displays "hovercards" popups with summaries of article contents

# .. envvar:: mediawiki_uncore_extensions
#
# List of skins will be download from MediaWiki repository, load with $require_once
mediawiki_uncore_extensions:
  - { name: 'CategoryTree' }               # provides a dynamic view of the wiki's catagory structure as a tree
  - { name: 'CirrusSearch' }               # implements searching for MediaWiki using ElasticSearch
  - { name: 'Scribunto' }                  # allws for embedding scripting language in MediaWiki.

# .. envvar:: mediawiki_3rdparty_extensions
#
# List of skins will be download from 3rd-party repository
mediawiki_3rdparty_extensions:
  - { name: 'DynamicPageList', repo: 'https://github.com/Alexia/DynamicPageList.git', version: 'c306679' }      # Create lists of other articles based on their category etc.
  - { name: 'EmbedVideo', repo: 'https://github.com/HydraWiki/mediawiki-embedvideo.git', version: '1c39883' }   # embedding video clips from over 24 popular video sharing services

# .. envvar:: mediawiki_extension_dependency
#
# List of extensions need to be initialize by composer
mediawiki_extension_dependency:
  - { name: 'SyntaxHighlight_GeSHi' }
  - { name: 'Elastica' }

# .. envvar:: mediawiki_Editor_CKeditor
#
# List of extensions need for CKeditor
mediawiki_Editor_CKeditor:
  - { name: 'WYSIWYG-CKeditor', repo: 'https://github.com/Mediawiki-wysiwyg/WYSIWYG-CKeditor.git', version: 'wysiwyg_mw128' }   # wysiwyg_mw127_459 for v1.27

# .. envvar:: mediawiki_Editor_VisualEditor
#
# List of extensions need for VisualEditor
mediawiki_Editor_VisualEditor:
  - { name: 'VisualEditor', repo: 'https://gerrit.wikimedia.org/r/p/mediawiki/extensions/VisualEditor.git' }            # integrates VisualEditor into MediaWiki for editing pages as rich content
  - { name: 'parsoid', repo: 'https://gerrit.wikimedia.org/r/p/mediawiki/services/parsoid.git', version: 'master' }     # Parsoid JS service, required for VisualEditor

# .. envvar:: mediawiki_Editor_VE_configuration
#
# List of extensions need for VisualEditor
mediawiki_Editor_VE_configuration:
  - { name: 'etc-initd-parsoid.j2', dest: '/etc/init.d/parsoid', mode: '0755' }
  - { name: 'mediawiki-parsoid-localsettings.js.j2', dest: '{{ mediawiki_root }}/extensions/parsoid/localsettings.js' }

# .. envvar:: mediawiki_configuration
#
# List of configuration file will be copy to Linux base filesystems
mediawiki_configuration:
  - { name: 'etc-nginx-confd-wiki.conf.j2', dest: '/etc/nginx/conf.d/wiki.conf' }
  - { name: 'etc-nginx-confd-wiki.ini.j2', dest: '/etc/nginx/conf.d/wiki.ini' }
  - { name: 'mediawiki-LocalSettings.php.j2', dest: '{{ mediawiki_root }}/LocalSettings.php' }
  - { name: 'mediawiki-searchEngine.sh.j2', dest: '{{ mediawiki_root }}/searchEngine.sh', mode: '0755' }
  - { name: 'mediawiki-imagesUploader.sh.j2', dest: '{{ mediawiki_root }}/imagesUploader.sh', mode: '0755' }

